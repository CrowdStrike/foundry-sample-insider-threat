
> playwright-foundry@1.0.0 test
> npx playwright test

[38;5;142m[dotenvx@1.49.0] injecting env (0) from .env[39m

Running 4 tests using 1 worker

[33m[dotenvx@1.49.0] injecting env (0) from .env[39m
  âœ“  1 [setup] â€º tests/authenticate.setup.ts:9:6 â€º authenticate (1.0s)
ğŸ”§ Test Configuration:
  Environment: Local
  Base URL: https://falcon.us-2.crowdstrike.com
  App Name: foundry-sample-insider-threat
  Default Timeout: 30000ms
  Retry Attempts: 2
  Debug Mode: false (enable with DEBUG=true npm test or npm run test:debug)
ğŸ” [1] AppCatalogPage: Check if app 'foundry-sample-insider-threat' is installed
â„¹ï¸ Searching for app 'foundry-sample-insider-threat' in catalog
ğŸ”§ [2] AppCatalogPage: App catalog page
âœ… Found app 'foundry-sample-insider-threat' in catalog
ğŸ‘† [3] AppCatalogPage: Click App 'foundry-sample-insider-threat' link
â„¹ï¸ App 'foundry-sample-insider-threat' installation status: Not installed
App 'foundry-sample-insider-threat' is not installed. Disabling workflow provisioning and installing...
â„¹ï¸ Starting to disable workflow provisioning for all templates
â„¹ï¸ Navigated to App Builder
â„¹ï¸ Navigated to Logic section
â„¹ï¸ Found 2 workflow template(s)
â„¹ï¸ Processing workflow: Remove leavers from watchlist and AD group
ğŸ”„ Retry 1/2: Disable provisioning for workflow: Remove leavers from watchlist and AD group
â„¹ï¸ Provisioning already disabled for: Remove leavers from watchlist and AD group
âœ… Disable provisioning for workflow: Remove leavers from watchlist and AD group succeeded on attempt 2
â„¹ï¸ Processing workflow: Add leavers to watchlist and AD group
â„¹ï¸ Disabling provisioning for: Add leavers to watchlist and AD group
ğŸ”„ Retry 1/2: Disable provisioning for workflow: Add leavers to watchlist and AD group
âŒ Disable provisioning for workflow: Add leavers to watchlist and AD group failed after 2 attempts - locator.click: Timeout 30000ms exceeded.
Call log:
[2m  - waiting for getByRole('grid').first().locator('tbody tr').nth(1).locator('a[data-test-selector="workflow-name-link"]').first()[22m

âš ï¸ Skipping workflow due to error: Add leavers to watchlist and AD group - locator.click: Timeout 30000ms exceeded.
Call log:
[2m  - waiting for getByRole('grid').first().locator('tbody tr').nth(1).locator('a[data-test-selector="workflow-name-link"]').first()[22m

âœ… Disabled provisioning for all 2 workflow template(s)
â„¹ï¸ Deploying app changes
ğŸ”„ Retry 1/2: Deploy app
â„¹ï¸ Deploying app changes
âŒ Deploy app failed after 2 attempts - locator.click: Timeout 30000ms exceeded.
Call log:
[2m  - waiting for locator('button:has-text("Deploy")').first()[22m
[2m    - locator resolved to <button type="button" data-test-selector="deploy-button" class="focusable inline-flex items-center justify-center transition truncate type-md-medium rounded-sm interactive-primary px-4 py-1">â€¦</button>[22m
[2m  - attempting click action[22m
[2m    2 Ã— waiting for element to be visible, enabled and stable[22m
[2m      - element is visible, enabled and stable[22m
[2m      - scrolling into view if needed[22m
[2m      - done scrolling[22m
[2m      - <div class="fixed inset-0 bg-overlay-2" data-test-selector="falcon-modal-overlay"></div> from <div data-falcon-portal="modal" data-replace-content="false">â€¦</div> subtree intercepts pointer events[22m
[2m    - retrying click action[22m
[2m    - waiting 20ms[22m
[2m    2 Ã— waiting for element to be visible, enabled and stable[22m
[2m      - element is visible, enabled and stable[22m
[2m      - scrolling into view if needed[22m
[2m      - done scrolling[22m
[2m      - <div class="fixed inset-0 bg-overlay-2" data-test-selector="falcon-modal-overlay"></div> from <div data-falcon-portal="modal" data-replace-content="false">â€¦</div> subtree intercepts pointer events[22m
[2m    - retrying click action[22m
[2m      - waiting 100ms[22m
[2m    58 Ã— waiting for element to be visible, enabled and stable[22m
[2m       - element is visible, enabled and stable[22m
[2m       - scrolling into view if needed[22m
[2m       - done scrolling[22m
[2m       - <div class="fixed inset-0 bg-overlay-2" data-test-selector="falcon-modal-overlay"></div> from <div data-falcon-portal="modal" data-replace-content="false">â€¦</div> subtree intercepts pointer events[22m
[2m     - retrying click action[22m
[2m       - waiting 500ms[22m

  âœ˜  2 [app-install] â€º tests/app-install.setup.ts:3:6 â€º install Insider Threat app (2.3m)


  1) [app-install] â€º tests/app-install.setup.ts:3:6 â€º install Insider Threat app â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    TimeoutError: locator.click: Timeout 30000ms exceeded.
    Call log:
    [2m  - waiting for locator('button:has-text("Deploy")').first()[22m
    [2m    - locator resolved to <button type="button" data-test-selector="deploy-button" class="focusable inline-flex items-center justify-center transition truncate type-md-medium rounded-sm interactive-primary px-4 py-1">â€¦</button>[22m
    [2m  - attempting click action[22m
    [2m    2 Ã— waiting for element to be visible, enabled and stable[22m
    [2m      - element is visible, enabled and stable[22m
    [2m      - scrolling into view if needed[22m
    [2m      - done scrolling[22m
    [2m      - <div class="fixed inset-0 bg-overlay-2" data-test-selector="falcon-modal-overlay"></div> from <div data-falcon-portal="modal" data-replace-content="false">â€¦</div> subtree intercepts pointer events[22m
    [2m    - retrying click action[22m
    [2m    - waiting 20ms[22m
    [2m    2 Ã— waiting for element to be visible, enabled and stable[22m
    [2m      - element is visible, enabled and stable[22m
    [2m      - scrolling into view if needed[22m
    [2m      - done scrolling[22m
    [2m      - <div class="fixed inset-0 bg-overlay-2" data-test-selector="falcon-modal-overlay"></div> from <div data-falcon-portal="modal" data-replace-content="false">â€¦</div> subtree intercepts pointer events[22m
    [2m    - retrying click action[22m
    [2m      - waiting 100ms[22m
    [2m    58 Ã— waiting for element to be visible, enabled and stable[22m
    [2m       - element is visible, enabled and stable[22m
    [2m       - scrolling into view if needed[22m
    [2m       - done scrolling[22m
    [2m       - <div class="fixed inset-0 bg-overlay-2" data-test-selector="falcon-modal-overlay"></div> from <div data-falcon-portal="modal" data-replace-content="false">â€¦</div> subtree intercepts pointer events[22m
    [2m     - retrying click action[22m
    [2m       - waiting 500ms[22m


       at ../src/pages/AppBuilderPage.ts:124

      122 |         const deployButton = this.page.locator('button:has-text("Deploy")').first();
      123 |         await deployButton.waitFor({ state: 'visible' });
    > 124 |         await deployButton.click();
          |                            ^
      125 |
      126 |         // Wait for the deploy modal to appear
      127 |         await this.page.waitForSelector('heading:has-text("Commit deployment")', { timeout: 5000 });
        at /Users/mraible/dev/foundry-sample-insider-threat/e2e/src/pages/AppBuilderPage.ts:124:28
        at Function.withRetry (/Users/mraible/dev/foundry-sample-insider-threat/e2e/src/utils/SmartWaiter.ts:156:24)
        at AppBuilderPage.deployApp (/Users/mraible/dev/foundry-sample-insider-threat/e2e/src/pages/AppBuilderPage.ts:117:5)
        at AppBuilderPage.disableWorkflowProvisioning (/Users/mraible/dev/foundry-sample-insider-threat/e2e/src/pages/AppBuilderPage.ts:358:5)
        at /Users/mraible/dev/foundry-sample-insider-threat/e2e/tests/app-install.setup.ts:14:5

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/app-install.setup.ts-install-Insider-Threat-app-app-install/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/app-install.setup.ts-install-Insider-Threat-app-app-install/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/app-install.setup.ts-install-Insider-Threat-app-app-install/error-context.md

  1 failed
    [app-install] â€º tests/app-install.setup.ts:3:6 â€º install Insider Threat app â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  2 did not run
  1 passed (2.3m)
